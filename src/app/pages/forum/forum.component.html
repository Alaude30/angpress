<header class="container mt-3 mat-typography">
  <h1> {{ category | uppercase }} </h1>
</header>

<main class="container">
  <div class="row ">

    <div class="col-md-8">


      <mat-card *ngIf="wpService.isLogged" class="mb-3">

        <!-- QUICK POST -->
        <mat-card-content>
          <form (ngSubmit)="onSubmitPost(postCreate)" #postCreate="ngForm">

            <mat-form-field appearance="outline">
              <mat-label> Title </mat-label>
              <input matInput type="text" name="title" ngModel>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <textarea matInput name="content" rows="5" ngModel placeholder="Write something here ..."></textarea>
            </mat-form-field>

            <mat-divider></mat-divider>

            <mat-card-actions align="end" class="m-0 mt-3 p-0">
              <button mat-raised-button color="primary" type="submit"> Post </button>
            </mat-card-actions>

          </form>
        </mat-card-content>
      </mat-card>
      <!-- END QUICK POST -->

      <!-- 10 RECENT POSTS  -->
      <ng-container *ngIf="posts; else loader">
        <mat-card *ngFor="let post of posts" class="mb-3 mat-typography">

          <mat-card-header *ngFor="let author of post._embedded.author">
            <img mat-card-avatar [src]="author.avatar_urls['96']" alt="" [routerLink]="['/profile', post.author]">
            <mat-card-title> {{ post.title.rendered }} </mat-card-title>
            <mat-card-subtitle> Author: {{ author.name }} | Date: {{ post.date | date:'mediumDate' }}
            </mat-card-subtitle>
          </mat-card-header>

          <img mat-card-image *ngIf="post._embedded['wp:featuredmedia']" [src]="post._embedded['wp:featuredmedia'][0].source_url"
            alt="">

          <mat-card-content [innerHTML]="post.content.rendered.length > 300 ? post.content.rendered.substring(0, 300) + '...' : post.content.rendered "></mat-card-content>

          <mat-card-actions>
            <button mat-button [routerLink]="['/forum/post', post.id]"> Read More </button>
          </mat-card-actions>

        </mat-card>
      </ng-container>
      <!-- ENND 10 RECENT POSTS -->

    </div>

    <div class="d-none d-md-block col-md-4">

      <!-- CONTRIBUTORS -->
      <mat-card class="mb-3 mat-typography">

        <mat-card-content>
          <h2> Contributors </h2>
          <img mat-card-xs-image [matTooltip]="user.name" *ngFor="let user of users" [src]="user.avatar_urls['48']" alt=""
            [routerLink]="['/profile',user.id]" class="mr-3">
        </mat-card-content>

      </mat-card>
      <!-- END CONTRIBUTORS -->

    </div>

    <!-- SPINNER -->
    <ng-template #loader>
      <mat-spinner class="m-auto"></mat-spinner>
    </ng-template>

  </div>
</main>
