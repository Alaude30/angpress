<header class="pt-5 mat-typography">
  <h1>Forum</h1>
</header>

<main class="mat-typography">

  <!-- spinner loader if no post yet -->
  <div class="row" *ngIf="posts[0] == null; else loader">
    <mat-spinner></mat-spinner>
  </div>

  <ng-template #loader>

    <!-- posts : 10 posts per page -->
    <div class="col-sm-8">
      <mat-card *ngFor="let post of posts" class="mb-3">

        <!-- post header: post title, author avatar  & name, post date  -->
        <mat-card-header *ngFor="let author of post._embedded.author">
          <img mat-card-avatar [src]="author.avatar_urls['96']" alt="">
          <mat-card-title>{{ post.title.rendered }}</mat-card-title>
          <mat-card-subtitle> Posted By: {{ author.name }} | Date: {{ post.date | date : 'medium' }}</mat-card-subtitle>
        </mat-card-header>

        <!-- post content: post content (sanitizer already) -->
        <mat-card-content id="wp-content" [innerHtml]="post.content.rendered | escapeHtml">
        </mat-card-content>

        <!-- post action buttons -->
        <mat-card-actions>
          <button mat-button> Comment</button>
        </mat-card-actions>

      </mat-card>

      <!-- posts paginator -->
      <hr>
      <mat-paginator [length]="length" [hidePageSize]="true" [pageSize]="10" (click)="onPageChange(paginator)"
        #paginator></mat-paginator>

    </div>

    <!-- create post if logged-->
    <div class="col-sm-4">

      <!-- detect logged user -->
      <div *ngIf="this.wp.isLogged">

        <form (ngSubmit)="onSubmitPost(postsData)" #postsData="ngForm">

          <!-- title -->
          <mat-form-field>
            <mat-label>Title: </mat-label>
            <input matInput type="text" name="title" ngModel required>
          </mat-form-field>

          <!-- content -->
          <textarea name="content" ngModel></textarea>
          <!-- <ckeditor [editor]="Editor" name="content" ngModel tags="textarea"></ckeditor> -->

          <!-- post button -->
          <br>
          <button mat-raised-button type="submit" color="primary"> Post </button>
        </form>
      </div>

    </div>
  </ng-template>

</main>
